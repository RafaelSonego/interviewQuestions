CREATE TABLE TBL_USER (
 PK_USER INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1) NOT NULL PRIMARY KEY,
 DS_LOGIN VARCHAR(150) NOT NULL,
 DS_PASSWORD VARCHAR(100) NOT NULL,
 DS_EMAIL VARCHAR(255) NOT NULL,
 DS_FIRSTNAME VARCHAR(30) NOT NULL,
 DS_LASTNAME VARCHAR(100) NOT NULL,
 DT_BIRTHDAY DATE NULL,
 DT_CREATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
 DT_UPDATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP,

 CONSTRAINT UC_TBL_USER UNIQUE (DS_LOGIN, DS_EMAIL, DS_FIRSTNAME, DS_LASTNAME)
);

CREATE TABLE IF NOT EXISTS TBL_TECHNOLOGY (
  PK_TECHNOLOGY INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1) NOT NULL PRIMARY KEY,
  DS_NAME VARCHAR(20) NOT NULL,
  FK_USER INTEGER NOT NULL,
  DT_CREATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  DT_UPDATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (FK_USER) REFERENCES TBL_USER(PK_USER),
  
  CONSTRAINT UC_TBL_TECHNOLOGY UNIQUE (DS_NAME)
);
  
CREATE TABLE TBL_EMPLOYER (
  PK_EMPLOYER INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1) NOT NULL PRIMARY KEY,
  DS_NAME VARCHAR(255) NOT NULL,
  FK_USER INTEGER NOT NULL,
  DT_CREATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  DT_UPDATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (FK_USER) REFERENCES TBL_USER(PK_USER),
  
  CONSTRAINT UC_TBL_EMPLOYER UNIQUE (DS_NAME)
);

CREATE TABLE TBL_QUESTION (
  PK_QUESTION INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1) NOT NULL PRIMARY KEY,
  DS_QUESTION VARCHAR(600) NOT NULL,
  DS_ANSWER VARCHAR(4000) NOT NULL,
  DS_ATTACHED LONGVARBINARY,
  FK_TECHNOLOGY INTEGER NOT NULL,
  FK_USER INTEGER NOT NULL,
  FK_EMPLOYER INTEGER NOT NULL,
  DT_CREATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  DT_UPDATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (FK_TECHNOLOGY) REFERENCES TBL_TECHNOLOGY(PK_TECHNOLOGY),
  FOREIGN KEY (FK_USER) REFERENCES TBL_USER(PK_USER),
  FOREIGN KEY (FK_EMPLOYER) REFERENCES TBL_EMPLOYER(PK_EMPLOYER),
  
  CONSTRAINT UC_TBL_QUESTION UNIQUE (FK_TECHNOLOGY, DS_QUESTION, FK_EMPLOYER)
);

DROP TABLE TBL_QUESTION;
DROP TABLE TBL_EMPLOYER;
DROP TABLE TBL_TECHNOLOGY;
DROP TABLE TBL_USER;

